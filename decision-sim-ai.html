<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DecisionSim AI | Intelligent Scenario Simulator</title>
    <meta name="description" content="Simulate future outcomes of your personal and business decisions using AI-driven logic.">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Marked.js -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; color: #1e293b; }
        .card { transition: transform 0.2s, box-shadow 0.2s; }
        .card:hover { transform: translateY(-2px); box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1); }
        .loader { border: 3px solid #f3f3f3; border-top: 3px solid #3b82f6; border-radius: 50%; width: 24px; height: 24px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .ad-placeholder { background-color: #e2e8f0; color: #64748b; border: 2px dashed #cbd5e1; display: flex; align-items: center; justify-content: center; height: 100px; width: 100%; margin: 20px 0; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 0.05em; }
        .prose h3 { color: #1e293b; font-weight: 700; margin-top: 1.5em; margin-bottom: 0.5em; font-size: 1.25rem; }
        .prose p { margin-bottom: 1em; line-height: 1.7; color: #334155; }
        .prose ul { list-style-type: disc; padding-left: 1.5em; margin-bottom: 1em; }
        .prose li { margin-bottom: 0.5em; }
        .animate-fade-in { animation: fadeIn 0.5s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center">

    <!-- Navbar -->
    <nav class="w-full bg-white shadow-sm border-b border-slate-200 sticky top-0 z-50">
        <div class="max-w-4xl mx-auto px-4 py-4 flex justify-between items-center">
            <div class="flex items-center gap-2">
                <svg class="w-8 h-8 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path></svg>
                <h1 class="text-xl font-bold tracking-tight">DecisionSim <span class="text-blue-600">AI</span></h1>
            </div>
        </div>
    </nav>

    <!-- Top Ad Placeholder -->
    <div class="max-w-4xl w-full px-4">
        <div class="ad-placeholder">Advertisement Space (Top)</div>
    </div>

    <!-- Main Tool Container -->
    <main class="max-w-3xl w-full px-4 py-8">
        
        <!-- Hero Section -->
        <div class="text-center mb-10">
            <h2 class="text-4xl font-extrabold mb-3 text-slate-900">Simulate Your Future</h2>
            <p class="text-lg text-slate-600">Don't guess. Use logic. Enter a difficult decision below, and our AI will simulate the best, worst, and most realistic outcomes.</p>
        </div>

        <!-- Input Section -->
        <div class="bg-white rounded-2xl shadow-lg border border-slate-100 p-6">
            <label class="block text-sm font-bold text-slate-700 mb-2">What decision are you facing?</label>
            <textarea id="userDecision" rows="4" class="w-full p-4 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition resize-none text-slate-700" placeholder="e.g., Should I quit my stable job to start a coffee shop? Or: Should I move to a new city for a relationship?"></textarea>
            
            <div class="flex justify-between items-center mt-4">
                <p class="text-xs text-slate-400">Analysis powered by Google Gemini AI.</p>
                <button onclick="runSimulation()" id="simulateBtn" class="bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-bold py-3 px-8 rounded-xl shadow-md transition transform hover:scale-105 flex items-center gap-2">
                    <span>Run Simulation</span>
                    <div id="btnLoader" class="loader hidden"></div>
                </button>
            </div>
        </div>

        <!-- Error Message -->
        <div id="errorMessage" class="hidden mt-4 bg-red-50 border-l-4 border-red-500 p-4 rounded text-red-700 text-sm"></div>

        <!-- Results Section -->
        <div id="resultsArea" class="hidden mt-10 space-y-8 animate-fade-in">
            
            <!-- Summary Header -->
            <div class="bg-slate-800 text-white p-6 rounded-xl shadow-lg">
                <h3 class="text-xs font-bold uppercase tracking-wider text-blue-300 mb-1">Decision Summary</h3>
                <div id="resSummary" class="text-lg font-medium"></div>
            </div>

            <!-- Scenarios Grid -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <!-- Best Case -->
                <div class="card bg-green-50 border border-green-100 p-6 rounded-xl">
                    <div class="flex items-center gap-2 mb-3">
                        <span class="bg-green-200 text-green-700 p-1.5 rounded-lg text-xs font-bold">OPTIMISTIC</span>
                        <h4 class="font-bold text-green-900">Best Case</h4>
                    </div>
                    <div id="resBest" class="text-sm text-green-800 leading-relaxed"></div>
                </div>

                <!-- Worst Case -->
                <div class="card bg-red-50 border border-red-100 p-6 rounded-xl">
                    <div class="flex items-center gap-2 mb-3">
                        <span class="bg-red-200 text-red-700 p-1.5 rounded-lg text-xs font-bold">PESSIMISTIC</span>
                        <h4 class="font-bold text-red-900">Worst Case</h4>
                    </div>
                    <div id="resWorst" class="text-sm text-red-800 leading-relaxed"></div>
                </div>

                <!-- Realistic -->
                <div class="card bg-blue-50 border border-blue-100 p-6 rounded-xl relative overflow-hidden">
                    <div class="absolute top-0 right-0 bg-blue-600 text-white text-[10px] px-2 py-1 rounded-bl-lg font-bold">MOST LIKELY</div>
                    <div class="flex items-center gap-2 mb-3">
                        <span class="bg-blue-200 text-blue-700 p-1.5 rounded-lg text-xs font-bold">REALISTIC</span>
                        <h4 class="font-bold text-blue-900">Probability</h4>
                    </div>
                    <div id="resRealistic" class="text-sm text-blue-800 leading-relaxed"></div>
                </div>
            </div>

            <!-- Deep Analysis -->
            <div class="bg-white border border-slate-200 p-6 rounded-xl shadow-sm">
                <h3 class="text-lg font-bold text-slate-800 mb-4 flex items-center gap-2">
                    <svg class="w-5 h-5 text-indigo-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                    Strategic Analysis
                </h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div>
                        <h5 class="font-semibold text-slate-700 mb-2 border-b border-slate-100 pb-1">‚ö†Ô∏è Risk Factors</h5>
                        <div id="resRisks" class="text-sm text-slate-600 prose-sm"></div>
                    </div>
                    <div>
                        <h5 class="font-semibold text-slate-700 mb-2 border-b border-slate-100 pb-1">üß† Emotional Impact</h5>
                        <div id="resEmotional" class="text-sm text-slate-600 prose-sm"></div>
                    </div>
                </div>
            </div>

            <!-- Long Term & Advice -->
            <div class="bg-slate-50 border border-slate-200 p-6 rounded-xl">
                <div class="mb-6">
                    <h5 class="font-semibold text-slate-800 mb-2">üìÖ 1-3 Year Perspective</h5>
                    <div id="resLongTerm" class="text-sm text-slate-600 italic"></div>
                </div>
                <div>
                    <h5 class="font-semibold text-slate-800 mb-2">üí° Practical Advice</h5>
                    <div id="resAdvice" class="text-sm text-slate-600"></div>
                </div>
            </div>

            <!-- Disclaimer -->
            <div class="text-center text-xs text-slate-400 mt-6 px-4">
                DecisionSim AI is an educational simulation tool. It does not provide professional medical, legal, or financial advice.
            </div>

        </div>

    </main>

    <!-- Bottom Ad Placeholder -->
    <div class="max-w-4xl w-full px-4">
        <div class="ad-placeholder">Advertisement Space (Bottom)</div>
    </div>

    <!-- Long Form Content -->
    <article class="max-w-3xl w-full px-4 py-12 border-t border-slate-200 mt-8 bg-white">
        <div class="prose prose-slate max-w-none">
            <h2 class="text-3xl font-bold text-slate-900 mb-6">The Architecture of Choice</h2>
            <p><strong>DecisionSim AI</strong> solves a specific cognitive bottleneck: the inability of the human brain to objectively calculate multiple future timelines simultaneously. While our brains are excellent at pattern recognition, they are notoriously bad at probability and removing emotional bias from high-stakes choices.</p>
            <h3>How to Use DecisionSim Correctly</h3>
            <p>To get the most out of this AI, you must be specific. A vague input like "How do I get rich?" will yield vague results. A specific input like "Should I invest $5,000 in stocks or use it to take a certification course?" will trigger a detailed comparative analysis.</p>
            <p class="text-sm text-slate-500 mt-4"><em>DecisionSim AI is a demonstration of applied Large Language Model logic.</em></p>
        </div>
    </article>

    <!-- Footer -->
    <footer class="w-full bg-slate-900 text-slate-400 py-6 text-center mt-auto">
        <p class="text-sm">DecisionSim AI | Not financial or legal advice.</p>
    </footer>

    <!-- LOGIC SCRIPT -->
    <script>
        // --- API & LOGIC HANDLING ---
        
        const API_KEY = "AIzaSyCZDotnZlBKmJp6GVjnDlBJIbtIC56RJR8"; 

        // LIST OF ALL POSSIBLE MODELS TO TRY (Robustness Fix)
        const MODEL_OPTIONS = [
            "gemini-1.5-flash",
            "gemini-1.5-flash-001",
            "gemini-1.5-flash-002",
            "gemini-1.5-pro",
            "gemini-1.0-pro",
            "gemini-pro"
        ];

        async function runSimulation() {
            const userInput = document.getElementById('userDecision').value.trim();
            
            // Validation
            if (!userInput || userInput.length < 5) {
                showError("Please describe your decision/situation in more detail.");
                return;
            }

            // UI State: Loading
            document.getElementById('simulateBtn').disabled = true;
            document.getElementById('simulateBtn').classList.add('opacity-75');
            document.getElementById('btnLoader').classList.remove('hidden');
            document.getElementById('errorMessage').classList.add('hidden');
            document.getElementById('resultsArea').classList.add('hidden');

            try {
                // Construct the Prompt
                const promptText = `
                    You are DecisionSim AI.
                    USER SITUATION: "${userInput}"
                    TASK: Analyze this.
                    RULES: No JSON. Use strict tags.
                    
                    OUTPUT FORMAT:
                    [SUMMARY]
                    (1 sentence summary)
                    [BEST]
                    (Best case outcome)
                    [WORST]
                    (Worst case outcome)
                    [REALISTIC]
                    (Most likely outcome with %)
                    [RISKS]
                    (Bullet points of risks)
                    [EMOTIONAL]
                    (Emotional analysis)
                    [LONGTERM]
                    (3 year view)
                    [ADVICE]
                    (3 actionable steps)
                `;

                let rawText = "";
                let success = false;
                let lastError = "";

                // --- ROBUST LOOP ---
                // Try every model until one works
                for (const modelName of MODEL_OPTIONS) {
                    try {
                        // console.log("Trying model: " + modelName); // Debugging
                        const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${modelName}:generateContent?key=${API_KEY}`, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({ contents: [{ parts: [{ text: promptText }] }] })
                        });

                        const data = await response.json();

                        if (data.error) {
                            throw new Error(data.error.message); // Try next model
                        }
                        
                        if (data.candidates && data.candidates[0].content) {
                            rawText = data.candidates[0].content.parts[0].text;
                            success = true;
                            break; // SUCCESS! Stop looping.
                        }
                    } catch (e) {
                        lastError = e.message;
                        continue; // Fail silently, try next model
                    }
                }

                if (!success) {
                    throw new Error("Connection failed. Google API might be busy. Please wait 1 minute and try again. (" + lastError + ")");
                }
                
                // Helper to extract text
                const extractSection = (tag) => {
                    const regex = new RegExp(`\\[${tag}\\]([\\s\\S]*?)(?=\\[|$)`, 'i');
                    const match = rawText.match(regex);
                    return match ? match[1].trim() : "Analysis unavailable.";
                };

                // Populate UI
                document.getElementById('resSummary').innerText = extractSection('SUMMARY');
                document.getElementById('resBest').innerText = extractSection('BEST');
                document.getElementById('resWorst').innerText = extractSection('WORST');
                document.getElementById('resRealistic').innerText = extractSection('REALISTIC');
                
                document.getElementById('resRisks').innerHTML = marked.parse(extractSection('RISKS'));
                document.getElementById('resEmotional').innerHTML = marked.parse(extractSection('EMOTIONAL'));
                document.getElementById('resLongTerm').innerText = extractSection('LONGTERM');
                document.getElementById('resAdvice').innerHTML = marked.parse(extractSection('ADVICE'));

                // Show Results
                document.getElementById('resultsArea').classList.remove('hidden');
                document.getElementById('resultsArea').scrollIntoView({ behavior: 'smooth' });

            } catch (error) {
                showError(error.message);
            } finally {
                // Reset UI
                document.getElementById('simulateBtn').disabled = false;
                document.getElementById('simulateBtn').classList.remove('opacity-75');
                document.getElementById('btnLoader').classList.add('hidden');
            }
        }

        function showError(msg) {
            const errDiv = document.getElementById('errorMessage');
            errDiv.innerText = msg;
            errDiv.classList.remove('hidden');
        }

    </script>
</body>
</html>
